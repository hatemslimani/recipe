<ion-header class="ion-no-border">
    <ion-toolbar>
        <ion-title class="text-bold">
            <ion-text color="primary">My</ion-text> Profile
        </ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="editProfile()">
                <ion-icon slot="icon-only" name="create-outline"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div class="profile-container">
        <!-- Profile Header -->
        <div class="profile-header ion-padding">
            <div class="avatar-container">
                <div class="avatar">
                    <ion-avatar>
                        <img [src]="profileImage || 'assets/avatar-placeholder.png'" alt="Profile Picture" />
                    </ion-avatar>
                    <div class="edit-badge" (click)="changeProfilePicture()">
                        <ion-icon name="camera"></ion-icon>
                    </div>
                </div>
                <div class="user-status" [class.online]="isOnline">
                    <span class="status-dot"></span>
                    {{ isOnline ? 'Online' : 'Offline' }}
                </div>
            </div>
            <h2 class="username">{{ username || 'John Doe' }}</h2>
            <p class="email">{{ email || 'john.doe@example.com' }}</p>
            <div class="bio">
                <p>{{ bio || 'Passionate about cooking and discovering new recipes!' }}</p>
            </div>
        </div>

        <!-- Achievement Banner -->
        <div class="achievement-banner" *ngIf="latestAchievement">
            <ion-icon name="trophy"></ion-icon>
            <div class="achievement-content">
                <h3>Latest Achievement</h3>
                <p>{{ latestAchievement }}</p>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-container">
            <div class="stat-item">
                <ion-icon name="heart"></ion-icon>
                <div class="stat-content">
                    <span class="stat-value">{{ favoriteCount }}</span>
                    <span class="stat-label">Favorites</span>
                </div>
            </div>
            <div class="stat-item">
                <ion-icon name="time"></ion-icon>
                <div class="stat-content">
                    <span class="stat-value">{{ cookingHours }}</span>
                    <span class="stat-label">Hours Cooked</span>
                </div>
            </div>
            <div class="stat-item">
                <ion-icon name="star"></ion-icon>
                <div class="stat-content">
                    <span class="stat-value">{{ rating }}</span>
                    <span class="stat-label">Rating</span>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <ion-button fill="clear" (click)="shareProfile()">
                <ion-icon slot="start" name="share-social"></ion-icon>
                Share Profile
            </ion-button>
            <ion-button fill="clear" (click)="viewAchievements()">
                <ion-icon slot="start" name="trophy"></ion-icon>
                Achievements
            </ion-button>
        </div>

        <!-- Settings -->
        <ion-list class="settings-list">
            <ion-item-group>
                <ion-item-divider>
                    <ion-label>Preferences</ion-label>
                </ion-item-divider>

                <ion-item>
                    <ion-icon name="moon" slot="start"></ion-icon>
                    <ion-label>Dark Mode</ion-label>
                    <ion-toggle [(ngModel)]="darkMode" (ionChange)="toggleDarkMode()"></ion-toggle>
                </ion-item>

                <ion-item>
                    <ion-icon name="notifications" slot="start"></ion-icon>
                    <ion-label>
                        <h2>Notifications</h2>
                        <p>Recipe updates & recommendations</p>
                    </ion-label>
                    <ion-toggle [(ngModel)]="notifications" (ionChange)="toggleNotifications()"></ion-toggle>
                </ion-item>

                <ion-item>
                    <ion-icon name="language" slot="start"></ion-icon>
                    <ion-label>Language</ion-label>
                    <ion-select [(ngModel)]="language" (ionChange)="changeLanguage()">
                        <ion-select-option value="en">English</ion-select-option>
                        <ion-select-option value="es">Español</ion-select-option>
                        <ion-select-option value="fr">Français</ion-select-option>
                    </ion-select>
                </ion-item>

                <ion-item>
                    <ion-icon name="restaurant" slot="start"></ion-icon>
                    <ion-label>Dietary Preferences</ion-label>
                    <ion-button fill="clear" slot="end" (click)="editDietaryPreferences()">
                        Edit
                    </ion-button>
                </ion-item>
            </ion-item-group>

            <ion-item-group>
                <ion-item-divider>
                    <ion-label>App</ion-label>
                </ion-item-divider>

                <ion-item button (click)="shareApp()">
                    <ion-icon name="share-social" slot="start"></ion-icon>
                    <ion-label>Share App</ion-label>
                </ion-item>

                <ion-item button (click)="rateApp()">
                    <ion-icon name="star" slot="start"></ion-icon>
                    <ion-label>Rate App</ion-label>
                </ion-item>

                <ion-item button (click)="openGitHub()">
                    <ion-icon name="logo-github" slot="start"></ion-icon>
                    <ion-label>GitHub Repository</ion-label>
                </ion-item>

                <ion-item>
                    <ion-icon name="information-circle" slot="start"></ion-icon>
                    <ion-label>Version</ion-label>
                    <ion-badge color="medium" slot="end">1.0.0</ion-badge>
                </ion-item>
            </ion-item-group>

            <ion-item-group>
                <ion-item-divider>
                    <ion-label>Account</ion-label>
                </ion-item-divider>

                <ion-item button (click)="exportData()">
                    <ion-icon name="download" slot="start"></ion-icon>
                    <ion-label>Export My Data</ion-label>
                </ion-item>

                <ion-item button color="danger" (click)="clearFavorites()">
                    <ion-icon name="trash" slot="start"></ion-icon>
                    <ion-label>Clear Favorites</ion-label>
                </ion-item>

                <ion-item button color="danger" (click)="logout()">
                    <ion-icon name="log-out" slot="start"></ion-icon>
                    <ion-label>Logout</ion-label>
                </ion-item>
            </ion-item-group>
        </ion-list>
    </div>
</ion-content>